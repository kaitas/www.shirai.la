<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://blog.shirai.la/tsuda/xmlrpc.php">

<title>Twitterから自宅の蛍光灯を制御したときのお話 &#8211; 汗を流して飯が旨い</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com/' />
<link rel="alternate" type="application/rss+xml" title="汗を流して飯が旨い &raquo; フィード" href="feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="汗を流して飯が旨い &raquo; コメントフィード" href="comments/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/blog.shirai.la\/tsuda\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.6"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='jquery.bxslider-css'  href='wp-content/plugins/bxslider-integration/assets/css/bxslider-integration.min.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='wp-includes/css/dist/block-library/style.min.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='bp-member-block-css'  href='wp-content/plugins/buddypress/bp-members/css/blocks/member.min.css@ver=6.0.0.css' type='text/css' media='all' />
<link rel='stylesheet' id='bp-group-block-css'  href='wp-content/plugins/buddypress/bp-groups/css/blocks/group.min.css@ver=6.0.0.css' type='text/css' media='all' />
<link rel='stylesheet' id='bp-legacy-css-css'  href='wp-content/plugins/buddypress/bp-templates/bp-legacy/css/buddypress.min.css@ver=6.0.0.css' type='text/css' media='screen' />
<link rel='stylesheet' id='contact-form-7-css'  href='wp-content/plugins/contact-form-7/includes/css/styles.css@ver=5.1.9.css' type='text/css' media='all' />
<link rel='stylesheet' id='wpt-twitter-feed-css'  href='wp-content/plugins/wp-to-twitter/css/twitter-feed.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='dlm-frontend-css'  href='wp-content/plugins/download-monitor/assets/css/frontend.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='pictorico-style-css'  href='wp-content/themes/pictorico/style.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='wp-content/themes/pictorico/genericons/genericons.css@ver=3.0.3.css' type='text/css' media='all' />
<link rel='stylesheet' id='pictorico-open-sans-condensed-css'  href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed%3A300%2C300italic%2C700&#038;subset=latin%2Clatin-ext&#038;ver=5.1.6' type='text/css' media='all' />
<link rel='stylesheet' id='pictorico-pt-serif-css'  href='https://fonts.googleapis.com/css?family=PT+Serif%3A400%2C700%2C400italic%2C700italic&#038;ver=5.1.6' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='wp-includes/css/dashicons.min.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='thickbox-css'  href='wp-includes/js/thickbox/thickbox.css@ver=5.1.6.css' type='text/css' media='all' />
<link rel='stylesheet' id='amazonjs-css'  href='wp-content/plugins/amazonjs/css/amazonjs.css@ver=0.10.css' type='text/css' media='all' />
<link rel='stylesheet' id='amazonjs-custom-css'  href='http://blog.shirai.la/tsuda/wp-content/themes/pictorico/amazonjs.css?ver=5.1.6' type='text/css' media='all' />
<script type='text/javascript' src='wp-includes/js/jquery/jquery.js@ver=1.12.4'></script>
<script type='text/javascript' src='wp-includes/js/jquery/jquery-migrate.min.js@ver=1.4.1'></script>
<script type='text/javascript' src='wp-content/plugins/bxslider-integration/assets/js/bxslider-integration.min.js@ver=5.1.6'></script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-core/js/confirm.min.js@ver=6.0.0'></script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-core/js/widget-members.min.js@ver=6.0.0'></script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-core/js/jquery-query.min.js@ver=6.0.0'></script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-core/js/vendor/jquery-cookie.min.js@ver=6.0.0'></script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-core/js/vendor/jquery-scroll-to.min.js@ver=6.0.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var BP_DTheme = {"accepted":"\u627f\u8a8d\u6e08","close":"\u9589\u3058\u308b","comments":"\u30b3\u30e1\u30f3\u30c8","leave_group_confirm":"\u672c\u5f53\u306b\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u96e2\u8131\u3057\u307e\u3059\u304b ?","mark_as_fav":"\u304a\u6c17\u306b\u5165\u308a","my_favs":"\u308f\u305f\u3057\u306e\u304a\u6c17\u306b\u5165\u308a","rejected":"\u62d2\u5426\u6e08\u307f","remove_fav":"\u304a\u6c17\u306b\u5165\u308a\u304b\u3089\u524a\u9664","show_all":"\u3059\u3079\u3066\u8868\u793a","show_all_comments":"\u3053\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u3059\u3079\u3066\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u898b\u308b","show_x_comments":"\u3059\u3079\u3066\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a  (%d)","unsaved_changes":"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u306a\u5909\u66f4\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u30da\u30fc\u30b8\u304b\u3089\u79fb\u52d5\u3059\u308b\u3068\u3001\u5909\u66f4\u304c\u3059\u3079\u3066\u5931\u308f\u308c\u307e\u3059\u3002","view":"\u8868\u793a","store_filter_settings":""};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/buddypress/bp-templates/bp-legacy/js/buddypress.min.js@ver=6.0.0'></script>
<link rel='https://api.w.org/' href='http://blog.shirai.la/tsuda/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php@rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='自宅にファイルサーバーを設置してネット機器から接続できるようにしよう！～それ系の知識がないひとのための超初級編～' href='index.html@p=928.html' />
<link rel='next' title='chocolateyはいいぞ' href='index.html@p=992.html' />
<meta name="generator" content="WordPress 5.1.6" />
<link rel="canonical" href="index.html@p=965.html" />
<link rel='shortlink' href='index.html@p=965.html' />
<link rel="alternate" type="application/json+oembed" href="http://blog.shirai.la/tsuda/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fblog.shirai.la%2Ftsuda%2F2016%2F04%2F03%2F20160403%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://blog.shirai.la/tsuda/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fblog.shirai.la%2Ftsuda%2F2016%2F04%2F03%2F20160403%2F&#038;format=xml" />

	<script type="text/javascript">var ajaxurl = 'http://blog.shirai.la/tsuda/wp-admin/admin-ajax.php';</script>

		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<script type="text/javascript" src="wp-content/plugins/si-captcha-for-wordpress/captcha/si_captcha.js@ver=1592152319"></script>
<!-- begin SI CAPTCHA Anti-Spam - login/register form style -->
<style type="text/css">
.si_captcha_small { width:175px; height:45px; padding-top:10px; padding-bottom:10px; }
.si_captcha_large { width:250px; height:60px; padding-top:10px; padding-bottom:10px; }
img#si_image_com { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_reg { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_log { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_side_login { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_checkout { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_jetpack { border-style:none; margin:0; padding-right:5px; float:left; }
img#si_image_bbpress_topic { border-style:none; margin:0; padding-right:5px; float:left; }
.si_captcha_refresh { border-style:none; margin:0; vertical-align:bottom; }
div#si_captcha_input { display:block; padding-top:15px; padding-bottom:5px; }
label#si_captcha_code_label { margin:0; }
input#si_captcha_code_input { width:65px; }
p#si_captcha_code_p { clear: left; padding-top:10px; }
.si-captcha-jetpack-error { color:#DC3232; }
</style>
<!-- end SI CAPTCHA Anti-Spam - login/register form style -->
	<style type="text/css">
			.site-title a,
		.site-description {
			color: #000000;
		}
		</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; background-image: url("files/2016/01/diamonds-582603_960_720-2.jpg"); background-position: center top; background-size: auto; background-repeat: repeat; background-attachment: scroll; }
</style>
	</head>

<body class="bp-legacy post-template-default single single-post postid-965 single-format-standard custom-background no-js">
<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">
		<div class="site-header-inner">
			<div class="site-branding">
				<h1 class="site-title"><a href="../tsuda.1.html" rel="home">汗を流して飯が旨い</a></h1>
				<h2 class="site-description">飯とか技術とかイベントとか</h2>
			</div>
			<nav id="site-navigation" class="main-navigation" role="navigation">
				<h1 class="menu-toggle"><span class="screen-reader-text">メニュー</span></h1>
				<a class="skip-link screen-reader-text" href="index.html@p=965.html#content">コンテンツへスキップ</a>

				<div class="menu-elbee-elgee-buddypress-menu-container"><ul id="menu-elbee-elgee-buddypress-menu" class="menu"><li id="menu-item-568" class="home menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-568"><a href="../tsuda.1.html">ホーム</a></li>
<li id="menu-item-579" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-579"><a href="index.html@p=246.html">このブログについて</a></li>
<li id="menu-item-581" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-581"><a href="index.html@p=5.html">プロフィール</a></li>
<li id="menu-item-573" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-573"><a href="index.html@p=365.html">制作作品一覧</a>
<ul class="sub-menu">
	<li id="menu-item-578" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-578"><a href="index.html@p=31.html">学内制作作品</a></li>
	<li id="menu-item-576" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-576"><a href="index.html@p=161.html">自主制作作品</a></li>
	<li id="menu-item-577" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-577"><a href="index.html@p=133.html">ゲームジャム</a></li>
	<li id="menu-item-574" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-574"><a href="http://blog.shirai.la/tsuda/all/%e3%83%8f%e3%83%83%e3%82%ab%e3%82%bd%e3%83%b3/">ハッカソン</a></li>
	<li id="menu-item-575" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-575"><a href="index.html@p=163.html">はげピッ!ピッ!</a></li>
</ul>
</li>
<li id="menu-item-835" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-835"><a href="index.html@p=36.html">趣味</a></li>
<li id="menu-item-985" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-985"><a href="index.html@p=983.html">Publications</a></li>
<li id="menu-item-1039" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1039"><a href="index.html@p=1036.html">ブログお引っ越し</a></li>
<li id="menu-item-1064" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1064"><a href="http://blog.shirai.la/tsuda/%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e3%81%aa%e3%81%97/">アクセスなし</a></li>
</ul></div>			</nav><!-- #site-navigation -->
			<div class="header-search">
				<form role="search" method="get" class="search-form" action="../tsuda.1.html">
				<label>
					<span class="screen-reader-text">検索:</span>
					<input type="search" class="search-field" placeholder="検索 &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="検索" />
			</form>			</div>
		</div>
	</header><!-- #masthead -->
		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<article id="post-965" class="has-thumbnail post-965 post type-post status-publish format-standard has-post-thumbnail hentry category-arduino category-141 category-27 category-2 tag-arduino tag-processing tag-144">

	<header class="entry-header">
									<div class="entry-thumbnail" style="background-image: url(files/2016/04/9-616x525.png);"></div>
							<h1 class="entry-title">Twitterから自宅の蛍光灯を制御したときのお話</h1>
	</header><!-- .entry-header -->
	<div class="entry-meta">
				<span class="posted-on"><a href="index.html@p=965.html" rel="bookmark"><time class="entry-date published" datetime="2016-04-03T12:27:45+09:00">2016年4月3日</time><time class="updated" datetime="2016-08-15T01:34:14+09:00">2016年8月15日</time></a></span><span class="byline"><span class="sep"> &bull; </span><span class="author vcard"><a class="url fn n" href="author/tsuda/index.html">Ryotaro Tsuda</a></span></span>	</div><!-- .entry-meta -->
	<div class="entry-content">
		<h2>twitterから自宅の蛍光灯を制御してみました</h2>
<p>やるに至った背景は，<br />
部屋の模様替えをした際に，配置上壁にある蛍光灯のスイッチにアクセスできなくなってしまいました．</p>
<p><a href="files/2016/04/1.png" rel="attachment wp-att-966"><img class="alignnone size-medium wp-image-966" src="files/2016/04/1-300x205.png" alt="1" width="300" height="205" srcset="files/2016/04/1-300x205.png 300w, files/2016/04/1-768x526.png 768w, files/2016/04/1.png 828w" sizes="(max-width: 300px) 100vw, 300px" /></a> <a href="files/2016/04/2.png" rel="attachment wp-att-967"><img class="alignnone size-medium wp-image-967" src="files/2016/04/2-300x205.png" alt="2" width="300" height="205" srcset="files/2016/04/2-300x205.png 300w, files/2016/04/2-768x525.png 768w, files/2016/04/2.png 836w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>蛍光灯はリモコン制御のLED照明なので，部屋中どこからでもリモコンで制御可能ですが，<br />
その辺に転がって紛失しそうであったため，入口に常設することにしました．</p>
<p>しかし，これだと<strong>ベッドに寝ころびながら電気を消せない！！</strong></p>
<p>ということで思い切ってtwitterから制御してみることにしました</p>
<p>システム構成はこんな感じ</p>
<p><a href="files/2016/04/3-1.png" rel="attachment wp-att-978"><img class="alignnone size-medium wp-image-978" src="files/2016/04/3-1-300x234.png" alt="3" width="300" height="234" srcset="files/2016/04/3-1-300x234.png 300w, files/2016/04/3-1-768x599.png 768w, files/2016/04/3-1.png 792w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>ソフトウェアはProcessingとTwitter APIであるTwitter 4jを利用．<br />
IRLED制御のための制御基盤にはArduino Uno互換で安価なSainSmart Unoを利用しました．</p>
<p>ソースコードはこちら<br />
<a href="https://github.com/TsudaRyotaro/public/blob/master/ControlRoomLight/Processing/ControlRoomLight_Git.pde">Processing</a><br />
<a href="https://github.com/TsudaRyotaro/public/blob/master/ControlRoomLight/Arduino/RoomControl.ino">Arduino</a></p>
<p>実行結果はこんな感じ</p>
<p><iframe width="1180" height="664" src="https://www.youtube.com/embed/HAXWvIXcwJc?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">Twitterから蛍光灯制御出来た！！ <a href="https://t.co/kJN06aEMia">pic.twitter.com/kJN06aEMia</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/713912141963616256">March 27, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">点灯もいける <a href="https://t.co/jMl7pZBwUl">pic.twitter.com/jMl7pZBwUl</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/713912522256949248">March 27, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>リモコンの主ボタンが<br />
全灯→常夜灯→消灯　を繰り返す使用になっていたので<br />
twitterでのつぶやきをそのボタンに割り当てました．</p>
<p>開発の際にいろいろ起きた問題をまとめます．</p>
<h3>1.キーワードをツイートして○○する的なTIPSが見つからない</h3>
<p>Processingからつぶやく類のTIPSは多くの方が先にやられていて<br />
ノウハウも残されているのに対し，Twitterをトリガーに使う例はなかなか見つかりませんでした&#8230;</p>
<p>タイムラインを取得するプログラムは発見したので，それを応用してごちゃごちゃやってみました．</p>
<p>Twitter.getUserTimeline();メソッドで自分自身(consumerKeyの取得元)アカウントのタイムラインを取得します．<br />
get(N)で上からNつめのツイート情報を取得．<br />
日時やリンクといった情報も格納されているので，さらにgetText()でストリング型でツイート本体をString型で取得できます．<br />
それをstring.equals(string)で比較すると，トリガーとして利用可能！</p>
<p><a href="files/2016/04/4.png" rel="attachment wp-att-970"><img class="alignnone size-medium wp-image-970" src="files/2016/04/4-300x120.png" alt="4" width="300" height="120" srcset="files/2016/04/4-300x120.png 300w, files/2016/04/4.png 429w" sizes="(max-width: 300px) 100vw, 300px" /><br />
</a>コードに起こすとこんな感じ<br />
statusesはListになっています．</p>
<h3>2.Twitterは連投できない仕様になっている</h3>
<p><a href="files/2016/04/6.png" rel="attachment wp-att-972"><img class="alignnone size-medium wp-image-972" src="files/2016/04/6-300x60.png" alt="6" width="300" height="60" srcset="files/2016/04/6-300x60.png 300w, files/2016/04/6.png 450w" sizes="(max-width: 300px) 100vw, 300px" /></a><a href="files/2016/04/5.png" rel="attachment wp-att-971"><img class="alignnone size-medium wp-image-971" src="files/2016/04/5-300x162.png" alt="5" width="300" height="162" srcset="files/2016/04/5-300x162.png 300w, files/2016/04/5.png 652w" sizes="(max-width: 300px) 100vw, 300px" /><br />
</a>Twitterは同一ツイートの連投はできない仕様になっています．<br />
これは，手入力の場合も，システムからつぶやく場合も同じ<br />
完全一致の場合のみはじかれるようです．<br />
数十分待つか，<br />
別のツイートを10回挟むかしなければならないようです．</p>
<p>この仕様は，ツイートをトリガーとする場合とても面倒！<br />
トリガーとなるキーワードを数個用意するとか，indexOf()メソッドを使用して<br />
キーワードを部分一致にするとかいろいろ方法はありますが，スマートではありません．</p>
<p>そこで今回は，トリガーを検出したら対象のツイートをシステムから削除する方法で解決しました．<br />
ツイートの削除にはTwitter.destroyStatus()メソッドを利用します．<br />
引数にはツイートのIDが入ります．ツイートのリンクURLを取得した際に<br />
最後のほうにある長い数字の羅列です．</p>
<p>ツイートIDの取得は簡単で，get(N)で目的のツイートを取得，それにgetId()で取得することができます．</p>
<p><a href="files/2016/04/7.png" rel="attachment wp-att-973"><img class="alignnone size-medium wp-image-973" src="files/2016/04/7-300x31.png" alt="7" width="300" height="31" srcset="files/2016/04/7-300x31.png 300w, files/2016/04/7.png 425w" sizes="(max-width: 300px) 100vw, 300px" /><br />
</a>こんな感じ．これをキーワード認識の次の処理に加えることで，認識した瞬間消去する仕様となり，同一ツイートの連投が可能となります．</p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">連続投稿不可の仕様だけど<br />Processingによりツイートを即時削除しているので連投可能<br />削除のスピードにTwitterアプリが追いついていない<br />ちなみにキーワードは#Lightness0326 にした。0326はコード書いた日 <a href="https://t.co/3MV3x9X8ii">pic.twitter.com/3MV3x9X8ii</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/713794975729737730">March 26, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<h3>3.TwitterのAPI制限に引っかかる(Error Code:429)</h3>
<p>ツイートを検出したら，と処理をするのが理想ですが，<br />
TwitterAPIの仕様上，タイムラインを取得→処理という仕様ですので，<br />
システムからアクセスしに行く設計となります．<br />
その際に気になるのがインターバル．リアルタイムである必要はありませんが，<br />
比較的即時性が求められると思うので，その辺を調査してみました．<br />
インターバルを短めに設定すると，こんなエラーが</p>
<p><a href="files/2016/04/8.png" rel="attachment wp-att-975"><img class="alignnone size-medium wp-image-975" src="files/2016/04/8-300x166.png" alt="8" width="300" height="166" srcset="files/2016/04/8-300x166.png 300w, files/2016/04/8.png 461w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>エラーコード429　案の定API制限系のエラーっぽいです．</p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">429は更新間隔が短すぎてAPI使い切った場合に出るメッセージです。更新間隔を長くするか、できるだけUserStreamをご利用ください QT <a href="https://twitter.com/naporinokani">@naporinokani</a>  一度TLタブを閉じて再び作成してもリクエストエラー（429）が出て更新しない</p>
<p>&mdash; もふったー (@mofooter) <a href="https://twitter.com/mofooter/status/341702646698225666">June 3, 2013</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>なるほどなるほど．じゃあその制限ぎりぎりを突いてみましょう．<br />
<a href="https://dev.twitter.com/rest/public/rate-limiting">TwitterAPI Reference-API Rate Limits-</a>によると</p>
<h2>15 Minute Windows</h2>
<p>Rate limits are divided into 15 minute intervals. Additionally, all endpoints require authentication, so there is no concept of unauthenticated calls and rate limits.</p>
<p>There are two initial buckets available for GET requests: 15 calls every 15 minutes, and 180 calls every 15 minutes.</p>
<p>だそうです．<br />
15分で180回ということは，1分に12回，5秒に1回が天井ということだそうです．<br />
ということでインターバルを5秒に設定することで解決できました～．</p>
<h3>4.いちいちツイートするのもめんどくさい</h3>
<p>キーワードは普段使わなそうな長めのものにしたため，いちいち打ち込むのがめんどくさい&#8230;.<br />
そのためツイートするだけのWebページを作りました．<br />
当初の目標はGUIでリモコンライクな画面があって，押すとその通りにうごいて&#8230;みたいな感じでしたが<br />
とりあえずα版ということで本家の<a href="https://about.twitter.com/ja/resources/buttons#hashtag">ツイートボタン作成ページ</a>で作成．1分くらいでできました．</p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">面倒くさかったのでTwitterが提供してるシェアボタンでα版は実装</p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/714093831273119745">March 27, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">確認画面煩わしいなー <a href="https://t.co/1GVxNPYaQv">pic.twitter.com/1GVxNPYaQv</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/714095170338164739">March 27, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<h3>5.Processing-シリアル通信用パッケージを使用したプロジェクトは64bit版exeがうごかない</h3>
<p>そのまんま．<br />
ProcessingにはExPort機能があるのでexeは当然吐けるのですが，<br />
Arduinoと通信の処理を加えた瞬間64bit版exeが実行不能に．<br />
おそらくProcessing付属のSerial Libraryが64bit版不対応みたいです．32bit版で動いたからよかった</p>
<h3>6.いちいち常夜灯になるのが煩わしい</h3>
<p>リモコンが全灯→常夜灯→消灯となっている仕様上，<br />
常夜灯を毎回挟み，2回送らねばならなかったのが煩わしかったので，<br />
SainSmartにcdsセルをつけて，照度を取得，現在の蛍光灯のステータスによって，<br />
赤外線信号を1回送るか，delay(100)を挟んで2回送るかを切り替え解決．<br />
全灯時は2回送信して　消灯に<br />
消灯時は1回送信して　全灯に</p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">cdsセルを買いにきた (@ 秋月電子通商 秋葉原店 in 千代田区, 東京都) <a href="https://t.co/sqYxPIYdnO">t.co/sqYxPIYdnO</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/713950061567352832">March 27, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>はまったところはこのあたりです．<br />
シリアル通信や学習リモコン等は先駆者の方々がわかりやすいエントリを残してくださったので<br />
サクサクっとできました．ありがとうございます．</p>
<p><span style="font-size: 20px">参考サイト</span></p>
<ul>
<li><a href="http://eikatou.net/blog/2012/07/1796/">Arduinoでリモコン作成</a></li>
<li><a href="http://elm-chan.org/docs/ir_format.html">赤外線リモコンの通信フォーマット</a></li>
</ul>
<p>最後に，ソースコードはすべて下のGitにあげておきます．<br />
<a href="https://github.com/TsudaRyotaro/public/tree/master/ControlRoomLight">github.com/TsudaRyotaro/public/tree/master/ControlRoomLight</a><br />
よきライフハックを！</p>
<h3>20160815追記</h3>
<p>ノーメンテだったがまだ生きていた</p>
<blockquote class="twitter-tweet" data-width="550">
<p lang="ja" dir="ltr">Twitterから蛍光灯制御、まだ生きていた <a href="https://t.co/mas4evVo18">pic.twitter.com/mas4evVo18</a></p>
<p>&mdash; Ryla (@utautattaro) <a href="https://twitter.com/utautattaro/status/764860355331764224">August 14, 2016</a></p></blockquote>
<p><script async src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p><a class="twitter-share-button" href="https://twitter.com/share">Tweet</a></p>
<p>&nbsp;</p>
			</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="cat-links">カテゴリー: <a href="category/arduino/index.html" rel="category tag">Arduino</a>・<a href="http://blog.shirai.la/tsuda/category/%e3%83%a9%e3%82%a4%e3%83%95%e3%83%8f%e3%83%83%e3%82%af/" rel="category tag">ライフハック</a>・<a href="http://blog.shirai.la/tsuda/category/%e5%bf%98%e5%82%99%e9%8c%b2/" rel="category tag">忘備録</a>・<a href="http://blog.shirai.la/tsuda/category/%e6%97%a5%e5%b8%b8/" rel="category tag">日常</a></span><span class="tags-links">タグ:  <a href="tag/arduino/index.html" rel="tag">Arduino</a>・<a href="tag/processing/index.html" rel="tag">Processing</a>・<a href="http://blog.shirai.la/tsuda/tag/%e3%83%a9%e3%82%a4%e3%83%95%e3%83%8f%e3%83%83%e3%82%af/" rel="tag">ライフハック</a></span><span class="permalink-bookmark"><a href="index.html@p=965.html" rel="bookmark">パーマリンクをブックマークする</a></span>
			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

			
				<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">投稿ナビゲーション</h1>
		<div class="nav-links">
			<div class="nav-previous"><a href="index.html@p=928.html" rel="prev"><span class="meta-nav"></span> 自宅にファイルサーバーを設置してネット機器から接続できるようにしよう！～それ系の知識がないひとのための超初級編～</a></div><div class="nav-next"><a href="index.html@p=992.html" rel="next">chocolateyはいいぞ <span class="meta-nav"></span></a></div>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
		
		</main><!-- #main -->
	</div><!-- #primary -->


	</div><!-- #content -->
				<div id="secondary" class="widget-areas" role="complementary">
		<div class="widget-areas-inner">
							<div class="widget-area">
					<aside id="tag_cloud-3" class="widget widget_tag_cloud"><h1 class="widget-title">Category Cloud</h1><div class="tagcloud"><a href="category/arduino/index.html" class="tag-cloud-link tag-link-17 tag-link-position-1" style="font-size: 8pt;" aria-label="Arduino (1個の項目)">Arduino</a>
<a href="category/choregraphe/index.html" class="tag-cloud-link tag-link-23 tag-link-position-2" style="font-size: 14.588235294118pt;" aria-label="choregraphe (4個の項目)">choregraphe</a>
<a href="category/ec2015/index.html" class="tag-cloud-link tag-link-98 tag-link-position-3" style="font-size: 8pt;" aria-label="EC2015 (1個の項目)">EC2015</a>
<a href="category/faq/index.html" class="tag-cloud-link tag-link-121 tag-link-position-4" style="font-size: 8pt;" aria-label="FAQ (1個の項目)">FAQ</a>
<a href="category/ggj/index.html" class="tag-cloud-link tag-link-132 tag-link-position-5" style="font-size: 8pt;" aria-label="GGJ (1個の項目)">GGJ</a>
<a href="category/ggj15/index.html" class="tag-cloud-link tag-link-19 tag-link-position-6" style="font-size: 10.964705882353pt;" aria-label="GGJ15 (2個の項目)">GGJ15</a>
<a href="category/git/index.html" class="tag-cloud-link tag-link-74 tag-link-position-7" style="font-size: 8pt;" aria-label="Git (1個の項目)">Git</a>
<a href="category/ivrc/index.html" class="tag-cloud-link tag-link-11 tag-link-position-8" style="font-size: 8pt;" aria-label="IVRC (1個の項目)">IVRC</a>
<a href="category/kinect/index.html" class="tag-cloud-link tag-link-21 tag-link-position-9" style="font-size: 10.964705882353pt;" aria-label="Kinect (2個の項目)">Kinect</a>
<a href="category/lavalvirtual/index.html" class="tag-cloud-link tag-link-20 tag-link-position-10" style="font-size: 10.964705882353pt;" aria-label="Lavalvirtual (2個の項目)">Lavalvirtual</a>
<a href="category/nao/index.html" class="tag-cloud-link tag-link-26 tag-link-position-11" style="font-size: 14.588235294118pt;" aria-label="NAO (4個の項目)">NAO</a>
<a href="category/pepper/index.html" class="tag-cloud-link tag-link-24 tag-link-position-12" style="font-size: 14.588235294118pt;" aria-label="Pepper (4個の項目)">Pepper</a>
<a href="category/realsense/index.html" class="tag-cloud-link tag-link-22 tag-link-position-13" style="font-size: 8pt;" aria-label="Realsense (1個の項目)">Realsense</a>
<a href="category/tepia/index.html" class="tag-cloud-link tag-link-28 tag-link-position-14" style="font-size: 8pt;" aria-label="TEPIA (1個の項目)">TEPIA</a>
<a href="category/unity/index.html" class="tag-cloud-link tag-link-18 tag-link-position-15" style="font-size: 17.882352941176pt;" aria-label="Unity (7個の項目)">Unity</a>
<a href="category/vrsj2015/index.html" class="tag-cloud-link tag-link-97 tag-link-position-16" style="font-size: 8pt;" aria-label="VRSJ2015 (1個の項目)">VRSJ2015</a>
<a href="category/vscode/index.html" class="tag-cloud-link tag-link-73 tag-link-position-17" style="font-size: 14.588235294118pt;" aria-label="VSCode (4個の項目)">VSCode</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%82%a4%e3%83%99%e3%83%b3%e3%83%88%e3%83%ac%e3%83%9d%e3%83%bc%e3%83%88/" class="tag-cloud-link tag-link-9 tag-link-position-18" style="font-size: 20.188235294118pt;" aria-label="イベントレポート (10個の項目)">イベントレポート</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%82%a4%e3%83%b3%e3%82%bf%e3%83%a9%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b32015/" class="tag-cloud-link tag-link-29 tag-link-position-19" style="font-size: 8pt;" aria-label="インタラクション2015 (1個の項目)">インタラクション2015</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%82%b2%e3%83%bc%e3%83%a0%e3%82%b8%e3%83%a3%e3%83%a0/" class="tag-cloud-link tag-link-88 tag-link-position-20" style="font-size: 14.588235294118pt;" aria-label="ゲームジャム (4個の項目)">ゲームジャム</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%83%80%e3%82%a4%e3%82%a8%e3%83%83%e3%83%88/" class="tag-cloud-link tag-link-12 tag-link-position-21" style="font-size: 10.964705882353pt;" aria-label="ダイエット (2個の項目)">ダイエット</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%83%8b%e3%82%b3%e3%83%8b%e3%82%b3%e8%b6%85%e4%bc%9a%e8%ad%b0/" class="tag-cloud-link tag-link-30 tag-link-position-22" style="font-size: 8pt;" aria-label="ニコニコ超会議 (1個の項目)">ニコニコ超会議</a>
<a href="http://blog.shirai.la/tsuda/category/%e3%83%a9%e3%82%a4%e3%83%95%e3%83%8f%e3%83%83%e3%82%af/" class="tag-cloud-link tag-link-141 tag-link-position-23" style="font-size: 8pt;" aria-label="ライフハック (1個の項目)">ライフハック</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%86%99%e7%9c%9f/" class="tag-cloud-link tag-link-16 tag-link-position-24" style="font-size: 8pt;" aria-label="写真 (1個の項目)">写真</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%8f%97%e8%b3%9e/" class="tag-cloud-link tag-link-112 tag-link-position-25" style="font-size: 8pt;" aria-label="受賞 (1個の項目)">受賞</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%ad%a6%e4%bc%9a%e7%99%ba%e8%a1%a8/" class="tag-cloud-link tag-link-96 tag-link-position-26" style="font-size: 8pt;" aria-label="学会発表 (1個の項目)">学会発表</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%ad%a6%e8%a1%93%e9%96%a2%e4%bf%82/" class="tag-cloud-link tag-link-3 tag-link-position-27" style="font-size: 18.705882352941pt;" aria-label="学術関係 (8個の項目)">学術関係</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%b0%b1%e6%b4%bb/" class="tag-cloud-link tag-link-104 tag-link-position-28" style="font-size: 10.964705882353pt;" aria-label="就活 (2個の項目)">就活</a>
<a href="http://blog.shirai.la/tsuda/category/%e5%bf%98%e5%82%99%e9%8c%b2/" class="tag-cloud-link tag-link-27 tag-link-position-29" style="font-size: 22pt;" aria-label="忘備録 (13個の項目)">忘備録</a>
<a href="http://blog.shirai.la/tsuda/category/%e6%97%85%e8%a1%8c/" class="tag-cloud-link tag-link-14 tag-link-position-30" style="font-size: 10.964705882353pt;" aria-label="旅行 (2個の項目)">旅行</a>
<a href="http://blog.shirai.la/tsuda/category/%e6%97%a5%e5%b8%b8/" class="tag-cloud-link tag-link-2 tag-link-position-31" style="font-size: 20.188235294118pt;" aria-label="日常 (10個の項目)">日常</a>
<a href="http://blog.shirai.la/tsuda/category/%e6%9b%b8%e3%81%8d%e7%89%a9/" class="tag-cloud-link tag-link-120 tag-link-position-32" style="font-size: 10.964705882353pt;" aria-label="書き物 (2個の項目)">書き物</a>
<a href="http://blog.shirai.la/tsuda/category/%e6%9c%aa%e5%88%86%e9%a1%9e/" class="tag-cloud-link tag-link-1 tag-link-position-33" style="font-size: 12.941176470588pt;" aria-label="未分類 (3個の項目)">未分類</a>
<a href="http://blog.shirai.la/tsuda/category/%e7%99%bd%e4%ba%95%e3%82%bb%e3%83%9f%e3%83%8a%e3%83%bc14/" class="tag-cloud-link tag-link-10 tag-link-position-34" style="font-size: 10.964705882353pt;" aria-label="白井セミナー&#039;14 (2個の項目)">白井セミナー&#039;14</a>
<a href="http://blog.shirai.la/tsuda/category/%e7%99%bd%e4%ba%95%e7%a0%94%e7%a9%b6%e5%ae%a4/" class="tag-cloud-link tag-link-25 tag-link-position-35" style="font-size: 20.847058823529pt;" aria-label="白井研究室 (11個の項目)">白井研究室</a>
<a href="http://blog.shirai.la/tsuda/category/%e7%ac%91%e9%a1%94%e8%aa%8d%e8%ad%98/" class="tag-cloud-link tag-link-99 tag-link-position-36" style="font-size: 8pt;" aria-label="笑顔認識 (1個の項目)">笑顔認識</a>
<a href="http://blog.shirai.la/tsuda/category/%e9%99%b6%e8%8a%b8/" class="tag-cloud-link tag-link-8 tag-link-position-37" style="font-size: 8pt;" aria-label="陶芸 (1個の項目)">陶芸</a>
<a href="http://blog.shirai.la/tsuda/category/%e9%9b%91%e8%a8%98/" class="tag-cloud-link tag-link-145 tag-link-position-38" style="font-size: 10.964705882353pt;" aria-label="雑記 (2個の項目)">雑記</a>
<a href="http://blog.shirai.la/tsuda/category/%e9%a3%9f%e3%81%b9%e7%89%a9/" class="tag-cloud-link tag-link-15 tag-link-position-39" style="font-size: 12.941176470588pt;" aria-label="食べ物 (3個の項目)">食べ物</a></div>
</aside>				</div>
										<div class="widget-area">
									</div>
										<div class="widget-area">
									</div>
										<div class="widget-area">
					<aside id="media_image-5" class="widget widget_media_image"><h1 class="widget-title">Laboratory</h1><a href="../index.html" target="_blank"><img width="143" height="59" src="files/2016/01/shiraiLab.png" class="image wp-image-869 aligncenter attachment-full size-full" alt="" style="max-width: 100%; height: auto;" /></a></aside>				</div>
					</div>
	</div><!-- #secondary -->
		<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
			<a href="https://ja.wordpress.org/">Proudly powered by WordPress</a>
			<span class="sep"> &bull; </span>
			Theme: Pictorico by <a href="http://wordpress.com/themes/pictorico/" rel="designer">WordPress.com</a>.		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript'>
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"http:\/\/blog.shirai.la\/tsuda\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"}};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/contact-form-7/includes/js/scripts.js@ver=5.1.9'></script>
<script type='text/javascript' src='wp-content/themes/pictorico/js/navigation.js@ver=20120206'></script>
<script type='text/javascript' src='wp-content/themes/pictorico/js/skip-link-focus-fix.js@ver=20130115'></script>
<script type='text/javascript' src='wp-includes/js/wp-embed.min.js@ver=5.1.6'></script>

</body>
</html>
